for the reactivity in the popup, make some sort of Renderer class that handles the state and redraws the popup when the state changes
